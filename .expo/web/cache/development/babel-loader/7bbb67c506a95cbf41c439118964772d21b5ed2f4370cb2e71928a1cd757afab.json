{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Appbar, Button, TextInput } from 'react-native-paper';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport firestore from '@react-native-firebase/firestore';\nimport Todo from \"./Todo\";\nimport Toast from 'react-native-toast-message';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var ref = firestore().collection('todos');\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    todo = _useState2[0],\n    setTodo = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    todos = _useState6[0],\n    setTodos = _useState6[1];\n  var toastRef = React.useRef(null);\n  useEffect(function () {\n    var unsubscribe = ref.onSnapshot(function (querySnapshot) {\n      var list = [];\n      querySnapshot.forEach(function (doc) {\n        var _doc$data = doc.data(),\n          title = _doc$data.title,\n          complete = _doc$data.complete;\n        list.push({\n          id: doc.id,\n          title: title,\n          complete: complete\n        });\n      });\n      setTodos(list);\n      if (loading) {\n        setLoading(false);\n      }\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, [loading]);\n  function addTodo() {\n    return _addTodo.apply(this, arguments);\n  }\n  function _addTodo() {\n    _addTodo = _asyncToGenerator(function* () {\n      var trimmedTodo = todo.trim();\n      if (trimmedTodo.length === 0) {\n        Toast.show({\n          type: 'error',\n          position: 'bottom',\n          bottomOffset: 100,\n          text1: 'Error',\n          text2: 'Todo cannot be empty!'\n        });\n        return;\n      }\n      try {\n        yield ref.add({\n          title: trimmedTodo,\n          complete: false\n        });\n        Toast.show({\n          type: 'success',\n          position: 'top',\n          text1: 'Success',\n          text2: `${trimmedTodo} added successfully!`,\n          visibilityTime: 4000,\n          autoHide: true,\n          topOffset: 30,\n          bottomOffset: 40\n        });\n        setTodo('');\n      } catch (error) {\n        console.error('Error adding todo:', error);\n        Toast.show({\n          type: 'error',\n          position: 'bottom',\n          bottomOffset: 100,\n          text1: 'Error',\n          text2: 'Failed to add todo!'\n        });\n      }\n    });\n    return _addTodo.apply(this, arguments);\n  }\n  if (loading) {\n    return null;\n  }\n  return _jsxs(SafeAreaProvider, {\n    children: [_jsx(StatusBar, {\n      barStyle: \"dark-content\",\n      hidden: false,\n      backgroundColor: \"#eee\",\n      translucent: true\n    }), _jsxs(View, {\n      style: {\n        flex: 1\n      },\n      children: [_jsx(Appbar.Header, {\n        mode: \"center-aligned\",\n        style: {\n          backgroundColor: '#55c'\n        },\n        children: _jsx(Appbar.Content, {\n          title: 'TODOs List',\n          style: {\n            backgroundColor: '#fff',\n            borderRadius: 20\n          }\n        })\n      }), _jsx(Text, {\n        children: \" List of TODOs! - H\\u1ED3 C\\xF4ng Minh\"\n      }), _jsx(FlatList, {\n        style: {\n          flex: 1\n        },\n        data: todos,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _jsx(Todo, _objectSpread({}, item));\n        },\n        ItemSeparatorComponent: function ItemSeparatorComponent() {\n          return _jsx(View, {\n            style: {\n              height: 1,\n              backgroundColor: '#ccc'\n            }\n          });\n        }\n      }), _jsxs(View, {\n        style: {\n          height: 60,\n          flexDirection: 'row',\n          justifyContent: 'flex-start',\n          marginBottom: 1\n        },\n        children: [_jsx(TextInput, {\n          style: {\n            width: '80%',\n            marginLeft: 2\n          },\n          mode: \"outlined\",\n          label: 'New Todo',\n          value: todo,\n          onChangeText: function onChangeText(text) {\n            return setTodo(text);\n          },\n          onSubmitEditing: addTodo\n        }), _jsx(Button, {\n          mode: \"text\",\n          icon: \"send\",\n          style: {\n            height: 50,\n            alignSelf: 'flex-end'\n          },\n          onPress: addTodo,\n          children: \"Add\"\n        })]\n      })]\n    }), _jsx(Toast, {\n      ref: toastRef\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","FlatList","StatusBar","StyleSheet","Text","View","Appbar","Button","TextInput","SafeAreaProvider","firestore","Todo","Toast","jsx","_jsx","jsxs","_jsxs","App","ref","collection","_useState","_useState2","_slicedToArray","todo","setTodo","_useState3","_useState4","loading","setLoading","_useState5","_useState6","todos","setTodos","toastRef","useRef","unsubscribe","onSnapshot","querySnapshot","list","forEach","doc","_doc$data","data","title","complete","push","id","addTodo","_addTodo","apply","arguments","_asyncToGenerator","trimmedTodo","trim","length","show","type","position","bottomOffset","text1","text2","add","visibilityTime","autoHide","topOffset","error","console","children","barStyle","hidden","backgroundColor","translucent","style","flex","Header","mode","Content","borderRadius","keyExtractor","item","renderItem","_ref","_objectSpread","ItemSeparatorComponent","height","flexDirection","justifyContent","marginBottom","width","marginLeft","label","value","onChangeText","text","onSubmitEditing","icon","alignSelf","onPress","styles","create","container","alignItems"],"sources":["C:/Users/HP/Desktop/Lab4/Lab4/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FlatList, StatusBar, StyleSheet, Text, View } from 'react-native';\r\nimport { Appbar, Button, TextInput } from 'react-native-paper';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport firestore from '@react-native-firebase/firestore';\r\nimport Todo from './Todo';\r\nimport Toast from 'react-native-toast-message';\r\n\r\nexport default function App() {\r\n  const ref = firestore().collection('todos');\r\n  const [todo, setTodo] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [todos, setTodos] = useState([]);\r\n\r\n  // Toast ref\r\n  const toastRef = React.useRef(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = ref.onSnapshot(querySnapshot => {\r\n      const list = [];\r\n      querySnapshot.forEach(doc => {\r\n        const { title, complete } = doc.data();\r\n        list.push({\r\n          id: doc.id,\r\n          title,\r\n          complete,\r\n        });\r\n      });\r\n      setTodos(list);\r\n      if (loading) {\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    // Cleanup subscription on component unmount\r\n    return () => unsubscribe();\r\n  }, [loading]);\r\n\r\n  async function addTodo() {\r\n    const trimmedTodo = todo.trim();\r\n\r\n    if (trimmedTodo.length === 0) {\r\n      Toast.show({\r\n        type: 'error',\r\n        position: 'bottom',\r\n        bottomOffset: 100,\r\n        text1: 'Error',\r\n        text2: 'Todo cannot be empty!',\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await ref.add({\r\n        title: trimmedTodo,\r\n        complete: false,\r\n      });\r\n\r\n      Toast.show({\r\n        type: 'success',\r\n        position: 'top',\r\n        text1: 'Success',\r\n        text2: `${trimmedTodo} added successfully!`,\r\n        visibilityTime: 4000,\r\n        autoHide: true,\r\n        topOffset: 30,\r\n        bottomOffset: 40,\r\n      });\r\n\r\n      setTodo('');\r\n    } catch (error) {\r\n      console.error('Error adding todo:', error);\r\n      Toast.show({\r\n        type: 'error',\r\n        position: 'bottom',\r\n        bottomOffset: 100,\r\n        text1: 'Error',\r\n        text2: 'Failed to add todo!',\r\n      });\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <SafeAreaProvider>\r\n      <StatusBar barStyle=\"dark-content\" hidden={false} backgroundColor=\"#eee\" translucent={true} />\r\n      <View style={{ flex: 1 }}>\r\n        <Appbar.Header mode=\"center-aligned\" style={{ backgroundColor: '#55c' }}>\r\n          <Appbar.Content title={'TODOs List'} style={{ backgroundColor: '#fff', borderRadius: 20 }} />\r\n        </Appbar.Header>\r\n        <Text> List of TODOs! - Hồ Công Minh</Text>\r\n        <FlatList\r\n          style={{ flex: 1 }}\r\n          data={todos}\r\n          keyExtractor={(item) => item.id}\r\n          renderItem={({ item }) => <Todo {...item} />}\r\n          ItemSeparatorComponent={() => <View style={{ height: 1, backgroundColor: '#ccc' }} />}\r\n        />\r\n        <View style={{ height: 60, flexDirection: 'row', justifyContent: 'flex-start', marginBottom: 1 }}>\r\n          <TextInput\r\n            style={{ width: '80%', marginLeft: 2 }}\r\n            mode=\"outlined\"\r\n            label={'New Todo'}\r\n            value={todo}\r\n            onChangeText={(text) => setTodo(text)}\r\n            onSubmitEditing={addTodo}\r\n          />\r\n          <Button mode=\"text\" icon=\"send\" style={{ height: 50, alignSelf: 'flex-end' }} onPress={addTodo}>\r\n            Add\r\n          </Button>\r\n        </View>\r\n      </View>\r\n      <Toast ref={toastRef} />\r\n    </SafeAreaProvider>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}